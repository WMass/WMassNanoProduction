Submit log for inputs: inputs/data.txt
Auto-generated with command ./scripts/prepareCrab.py -i inputs/data.txt --submit 3 1
Script ran at 2020-12-10 11:52:07.357135
Git hash of scripts is "a3ef7868828e5c519e0d9504b60491c98d30cd55"
Git hash of CMSSW is "5b1abbcf46ccea6c2ed9e071349bd78493beacd4"

Git diff of scripts is 
diff --git a/scripts/prepareCrab.py b/scripts/prepareCrab.py
index 239943f..6901529 100755
--- a/scripts/prepareCrab.py
+++ b/scripts/prepareCrab.py
@@ -50,10 +50,16 @@ def submitCrab(outfile, history_file, dryRun):
     command = ["crab", "submit", outfile]
     if dryRun:
         command.insert(0, "echo")
-    out = subprocess.check_output(command, cwd = submit_dir).decode("UTF-8")
-    sys.stdout.write(out)
+    output = ["Running command: %s\n" % " ".join(command)]
+    try:
+        out = subprocess.check_output(command, cwd = submit_dir).decode("UTF-8")
+        sys.stdout.write(out)
+    except subprocess.CalledProcessError as e:
+        out = "--> Failed to submit file %s" % outfile
+        logging.warning(out)
+    output.append(out)
     with open(history_file, "a") as f:
-        f.write(out)
+        f.write("\n".join(output))
 
 def writeHistory(path, history_file, inputFile):
     cmssw_dir = os.environ["CMSSW_BASE"]+"/src"
@@ -61,10 +67,10 @@ def writeHistory(path, history_file, inputFile):
         f.write("Submit log for inputs: %s\n" % inputFile)
         f.write("Auto-generated with command %s\n" % scriptCall())
         f.write("Script ran at %s\n" % str(datetime.datetime.now()))
-        f.write("Git hash of scripts is %s\n" % gitHash(path))
-        f.write("Git hash of CMSSW is \n%s\n" % gitHash(cmssw_dir))
+        f.write("Git hash of scripts is %s" % gitHash(path))
+        f.write("Git hash of CMSSW is %s\n" % gitHash(cmssw_dir))
         f.write("Git diff of scripts is \n%s\n" % gitDiff(path))
-        f.write("    Git diff of CMSSW is %s\n" % gitDiff(cmssw_dir))
+        f.write("Git diff of CMSSW is \n%s\n" % gitDiff(cmssw_dir))
         f.write("-"*80+"\n")
 
 def makeSubmitFiles(inputFile, nThreads, submit, doConfig, dryRun):

Git diff of CMSSW is 

--------------------------------------------------------------------------------
Running command: crab submit /home/kelong/work/mWProd/CMSSW_10_6_19_patch2/src/Configuration/WMassNanoProduction/crab_submit/submitSingleMuon_Run2016B-21Feb2020_ver2_UL2016_HIPM-v1.py

Will use CRAB configuration file /home/kelong/work/mWProd/CMSSW_10_6_19_patch2/src/Configuration/WMassNanoProduction/crab_submit/submitSingleMuon_Run2016B-21Feb2020_ver2_UL2016_HIPM-v1.py
Importing CMSSW configuration ../configs/NanoV8Data_cfg.py
Finished importing CMSSW configuration ../configs/NanoV8Data_cfg.py
You are requesting more than 1 core per job. Please make sure that your multi-threaded code is thread-safe and CPU-efficient, and request the correct amount of memory since the default 'maxMemoryMB' value is meant for single core jobs.
Sending the request to the server at cmsweb.cern.ch
Success: Your task has been delivered to the prod CRAB3 server.
Task name: 201210_105222:kelong_crab_SingleMuon_Run2016B-21Feb2020_ver2_UL2016_HIPM-v1
Project dir: crab_projects/crab_SingleMuon_Run2016B-21Feb2020_ver2_UL2016_HIPM-v1
Please use ' crab status -d crab_projects/crab_SingleMuon_Run2016B-21Feb2020_ver2_UL2016_HIPM-v1 ' to check how the submission process proceeds.
Log file is /home/kelong/work/mWProd/CMSSW_10_6_19_patch2/src/Configuration/WMassNanoProduction/crab_submit/crab_projects/crab_SingleMuon_Run2016B-21Feb2020_ver2_UL2016_HIPM-v1/crab.log
Running command: crab submit /home/kelong/work/mWProd/CMSSW_10_6_19_patch2/src/Configuration/WMassNanoProduction/crab_submit/submitSingleMuon_Run2016E-21Feb2020_UL2016_HIPM-v1.py

Will use CRAB configuration file /home/kelong/work/mWProd/CMSSW_10_6_19_patch2/src/Configuration/WMassNanoProduction/crab_submit/submitSingleMuon_Run2016E-21Feb2020_UL2016_HIPM-v1.py
Importing CMSSW configuration ../configs/NanoV8Data_cfg.py
Finished importing CMSSW configuration ../configs/NanoV8Data_cfg.py
You are requesting more than 1 core per job. Please make sure that your multi-threaded code is thread-safe and CPU-efficient, and request the correct amount of memory since the default 'maxMemoryMB' value is meant for single core jobs.
Sending the request to the server at cmsweb.cern.ch
Success: Your task has been delivered to the prod CRAB3 server.
Task name: 201210_105238:kelong_crab_SingleMuon_Run2016E-21Feb2020_UL2016_HIPM-v1
Project dir: crab_projects/crab_SingleMuon_Run2016E-21Feb2020_UL2016_HIPM-v1
Please use ' crab status -d crab_projects/crab_SingleMuon_Run2016E-21Feb2020_UL2016_HIPM-v1 ' to check how the submission process proceeds.
Log file is /home/kelong/work/mWProd/CMSSW_10_6_19_patch2/src/Configuration/WMassNanoProduction/crab_submit/crab_projects/crab_SingleMuon_Run2016E-21Feb2020_UL2016_HIPM-v1/crab.log
Running command: crab submit /home/kelong/work/mWProd/CMSSW_10_6_19_patch2/src/Configuration/WMassNanoProduction/crab_submit/submitSingleMuon_Run2016G-21Feb2020_UL2016-v1.py

Will use CRAB configuration file /home/kelong/work/mWProd/CMSSW_10_6_19_patch2/src/Configuration/WMassNanoProduction/crab_submit/submitSingleMuon_Run2016G-21Feb2020_UL2016-v1.py
Importing CMSSW configuration ../configs/NanoV8Data_cfg.py
Finished importing CMSSW configuration ../configs/NanoV8Data_cfg.py
You are requesting more than 1 core per job. Please make sure that your multi-threaded code is thread-safe and CPU-efficient, and request the correct amount of memory since the default 'maxMemoryMB' value is meant for single core jobs.
Sending the request to the server at cmsweb.cern.ch
Success: Your task has been delivered to the prod CRAB3 server.
Task name: 201210_105254:kelong_crab_SingleMuon_Run2016G-21Feb2020_UL2016-v1
Project dir: crab_projects/crab_SingleMuon_Run2016G-21Feb2020_UL2016-v1
Please use ' crab status -d crab_projects/crab_SingleMuon_Run2016G-21Feb2020_UL2016-v1 ' to check how the submission process proceeds.
Log file is /home/kelong/work/mWProd/CMSSW_10_6_19_patch2/src/Configuration/WMassNanoProduction/crab_submit/crab_projects/crab_SingleMuon_Run2016G-21Feb2020_UL2016-v1/crab.log
